---
layout: post
title: '策略模式'
date: 2023-04-22
description: '策略模式'
tags: '设计模式'
--- 

创建一个能够根据所传递的参数对象的不同而具有不同行为的方法，被称为策略模式。这类方法包括所要执行的算法中固定不变的部分，而“策略”包含变化的部分。策略就是传递进去的参数对象，它包括要执行的代码。

### 策略模式具体实现

玩枪战类游戏，可以根据不同战场情况，切换枪支。

**给策略对象（枪）定义一个公共接口**

```java
public interface Weapon {
    public void gun();
}
```

**定义具体的策略类（ConcreateStategy）,实现上面的接口**

```java
public class FirstGun implements Weapon {
    @Override
    public void gun() {
        System.out.println("使用AWM狙击步枪");
    }
}
```

```java
public class SecondGun implements Weapon {
    @Override
    public void gun(){
        System.out.println("使用S12K");
    }
}
```

**定义一个环境类（Contex），类中持有一个对公共接口的引用，以及相应的get、set方法、构造方法**

```java
public class Context {
    Weapon weapon;
    public Context(Weapon weapon) { //构造函数
        super();
        this.weapon = weapon;
    }
    public Weapon getWeapon() { //get方法
        return weapon;
    }
    public void setWeapon(Weapon weapon) { //set方法
        this.weapon = weapon;
    }
    public void gun() {
        weapon.gun();
    }
}
```

**最后，客户端自由调用策略**

```java
public class StrategyClient {
    public static void main(String[] args) {
        //使用构造函数默认选择一把AWM狙击步枪(一个策略)
        Context context = new Context(new FirstGun());
        contxt.gun();

        //使用get、set方法切换到S12K(切换策略)
        System.out.println("--右前方30米发现敌人--");
        Context.set(new SecondGun());
        context.gun();
    }
}
```

### 小结
1. 给对象传入什么样的策略，就执行什么样的动作。
2. 可以轻易的扩展与改变策略，可以动态改变对象的行为。
3. 客户端必须知道所有的策略类，并自行决定使用哪一种。每个具体的策略都会产生一个新类，这样会造成很多策略类。
